extends layout

block vars
  - locals.page = 'home'
  - locals.pageTitle = "All Customers - RethinkDB Evaluation"

append content
  .navbar.navbar-inverse.navbar-fixed-top(role="navigation")
    .container-fluid
      .navbar-header
        button.navbar-toggle(type="button" data-toggle="collapse" data-target=".navbar-collapse")
          span.sr-only Toggle navigation
          span.icon-bar
          span.icon-bar
          span.icon-bar
        a.navbar-brand(href="/") RethinkDB Evaluation

      .navbar-collapse.collapse
        ul.nav.navbar-nav.navbar-right
          li
            a(href="#") Customers
          li
            a(href="#") Products by Zip

  .container-fluid
    .row
      .col-sm-9.col-sm-offset-3.col-md-10.col-md-offset-1.main
        h1.page-header Customers

        button#addCustomer.btn.btn-sm.btn-primary.pull-right + Add Customer
        
        form#customerForm.form-horizontal.inactive
          fieldset
            
            legend Customer
            .row
              label.col-md-4.control-label(for="firstName") First Name
              .controls.col-md-4
                input#firstName.form-control.input-xlarge(name="customer[firstName]" type="text" placeholder="first name")

            .row
              label.col-md-4.control-label(for="lastName") Last Name
              .controls.col-md-4
                input#lastName.form-control.input-xlarge(name="customer[lastName]" type="text" placeholder="last name")

            .row
              label.col-md-4.control-label(for="email") Email
              .controls.col-md-4
                input#email.form-control.input-xlarge(name="customer[email]" type="text" placeholder="email")

            .row
              label.col-md-4.control-label(for="street") Street
              .controls.col-md-4
                input#street.form-control.input-xlarge(name="customer[address][street]" type="text" placeholder="street")

            .row
              label.col-md-4.control-label(for="state") State
              .controls.col-md-4
                input#state.form-control.input-xlarge(name="customer[address][state]" type="text" placeholder="state")

            .row
              label.col-md-4.control-label(for="zip") Zip
              .controls.col-md-4
                input#zip.form-control.input-xlarge(name="customer[address][zip]" type="text" placeholder="zip")

            .row
              span.col-md-4
              .controls.col-md-4
                button#addCustomer.btn.btn-default Add

        .table-responsive
          table#customerTable.table.table-striped
            thead
              tr
                th Name
                th Zip
                th Email
                th purchases
                th
            tbody
              for customer in customers
                tr(data-id=customer.id)
                  td= customer.firstName + ' ' + customer.lastName
                  td= customer.address.zip
                  td= customer.email
                  td 
                    span.purchases= (customer.purchases || []).length 
                    | 
                    button.btn.btn-xs.btn-primary.add + add
                  td
                    button.btn.btn-xs.btn-danger.delete delete




